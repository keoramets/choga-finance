<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Net Worth Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="app-header">
      <div class="logo">Choga Finance</div>
      <nav class="nav">
        <button class="nav-btn active" data-view="dashboard-view">
          Dashboard
        </button>
        <button class="nav-btn" data-view="accounts-view">Accounts</button>
        <button class="nav-btn" data-view="expenses-view">Expenses</button>
        <button class="nav-btn" data-view="incomes-view">Incomes</button>
        <button class="nav-btn" data-view="debts-view">Debts</button>
      </nav>
    </header>

    <main class="app-main">
      <!-- DASHBOARD -->
      <section id="dashboard-view" class="view active-view">
        <h1>Dashboard</h1>
        <div class="cards-grid">
          <div class="card card-net-worth">
            <h2>Net Worth</h2>
            <p class="big-number" id="netWorthValue">$0.00</p>
          </div>

          <button class="card card-accounts" data-view-target="accounts-view">
            <h3>Accounts</h3>
            <p>Total in accounts</p>
            <p class="card-number" id="totalAccountsValue">$0.00</p>
          </button>

          <button class="card card-expenses" data-view-target="expenses-view">
            <h3>Expenses</h3>
            <p>This month planned</p>
            <p class="card-number" id="thisMonthExpenses">$0.00</p>
          </button>

          <button class="card card-incomes" data-view-target="incomes-view">
            <h3>Incomes</h3>
            <p>This month expected</p>
            <p class="card-number" id="thisMonthIncomes">$0.00</p>
          </button>

          <button class="card card-debts" data-view-target="debts-view">
            <h3>Debts</h3>
            <p>Total debt</p>
            <p class="card-number" id="totalDebt">$0.00</p>
          </button>
        </div>

        <section class="flow-summary">
          <h2>Cash Flow - This Month</h2>
          <div class="flow-row">
            <div>
              <span class="label">Inflows</span>
              <span id="flowInflows">$0.00</span>
            </div>
            <div>
              <span class="label">Outflows</span>
              <span id="flowOutflows">$0.00</span>
            </div>
            <div>
              <span class="label">Net</span>
              <span id="flowNet" class="flow-net-neutral">$0.00</span>
            </div>
          </div>
        </section>
      </section>

      <!-- ACCOUNTS VIEW -->
      <section id="accounts-view" class="view">
        <div class="view-header">
          <h1>Accounts</h1>
          <button id="btnAddAccount" class="primary-btn">+ New Account</button>
        </div>

        <div class="filters-row">
          <label>
            Sort by:
            <select id="accountSort">
              <option value="createdAt_desc">Newest</option>
              <option value="createdAt_asc">Oldest</option>
              <option value="name_asc">Name A-Z</option>
              <option value="balance_desc">Balance high to low</option>
              <option value="balance_asc">Balance low to high</option>
            </select>
          </label>
          <label>
            Type:
            <select id="accountTypeFilter">
              <option value="all">All</option>
              <option value="savings">Savings</option>
              <option value="checking">Checking</option>
              <option value="cash">Cash</option>
            </select>
          </label>
        </div>

        <table class="data-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Type</th>
              <th>Balance</th>
              <th>Interest</th>
              <th>Compounding</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="accountsTableBody">
            <!-- Rows inserted by JS -->
          </tbody>
        </table>
      </section>

      <!-- EXPENSES VIEW -->
      <section id="expenses-view" class="view">
        <div class="view-header">
          <h1>Expenses</h1>
          <button id="btnAddExpense" class="primary-btn">+ New Expense</button>
        </div>

        <div class="filters-row">
          <label>
            Sort by:
            <select id="expenseSort">
              <option value="createdAt_desc">Newest</option>
              <option value="createdAt_asc">Oldest</option>
              <option value="name_asc">Name A-Z</option>
              <option value="amount_desc">Amount high to low</option>
              <option value="amount_asc">Amount low to high</option>
            </select>
          </label>
          <label>
            Frequency:
            <select id="expenseFrequencyFilter">
              <option value="all">All</option>
              <option value="once">Once</option>
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
              <option value="monthly">Monthly</option>
              <option value="yearly">Yearly</option>
            </select>
          </label>
        </div>

        <table class="data-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Amount</th>
              <th>Frequency</th>
              <th>Active</th>
              <th>Paid from</th>
              <th>Category</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="expensesTableBody">
            <!-- Rows inserted by JS -->
          </tbody>
        </table>
      </section>

      <!-- INCOMES VIEW -->
      <section id="incomes-view" class="view">
        <div class="view-header">
          <h1>Incomes</h1>
          <button id="btnAddIncome" class="primary-btn">+ New Income</button>
        </div>

        <div class="filters-row">
          <label>
            Sort by:
            <select id="incomeSort">
              <option value="createdAt_desc">Newest</option>
              <option value="createdAt_asc">Oldest</option>
              <option value="name_asc">Name A-Z</option>
              <option value="amount_desc">Amount high to low</option>
              <option value="amount_asc">Amount low to high</option>
            </select>
          </label>
          <label>
            Frequency:
            <select id="incomeFrequencyFilter">
              <option value="all">All</option>
              <option value="once">Once</option>
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
              <option value="monthly">Monthly</option>
              <option value="yearly">Yearly</option>
            </select>
          </label>
        </div>

        <table class="data-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Amount</th>
              <th>Frequency</th>
              <th>Active</th>
              <th>Destination</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="incomesTableBody">
            <!-- Rows inserted by JS -->
          </tbody>
        </table>
      </section>

      <!-- DEBTS VIEW -->
      <section id="debts-view" class="view">
        <div class="view-header">
          <h1>Debts</h1>
          <button id="btnAddDebt" class="primary-btn">+ New Debt</button>
        </div>

        <div class="filters-row">
          <label>
            Sort by:
            <select id="debtSort">
              <option value="createdAt_desc">Newest</option>
              <option value="createdAt_asc">Oldest</option>
              <option value="name_asc">Name A-Z</option>
              <option value="balance_desc">Balance high to low</option>
              <option value="balance_asc">Balance low to high</option>
            </select>
          </label>
          <label>
            Type:
            <select id="debtTypeFilter">
              <option value="all">All</option>
              <option value="long_term">Long term</option>
              <option value="short_term">Short term</option>
            </select>
          </label>
        </div>

        <table class="data-table">
          <thead>
            <tr>
              <th>Name</th>
              <th>Balance</th>
              <th>APR</th>
              <th>Type</th>
              <th>Category</th>
              <th>Min. payment</th>
              <th></th>
            </tr>
          </thead>
          <tbody id="debtsTableBody">
            <!-- Rows inserted by JS -->
          </tbody>
        </table>

        <section class="flow-summary" style="margin-top: 1.5rem">
          <h2>Debt repayment calculator</h2>
          <div class="filters-row">
            <label>
              Debt
              <select id="debtCalcDebt">
                <!-- filled by JS -->
              </select>
            </label>
            <label>
              Planned monthly payment
              <input type="number" id="debtCalcPayment" step="0.01" min="0" />
            </label>
            <button id="btnDebtCalcRun" class="primary-btn">Calculate</button>
          </div>

          <div id="debtCalcResult">
            <p class="label">Results will appear here after you calculate.</p>
            <ul>
              <li>
                <strong>Months to payoff:</strong>
                <span id="debtCalcMonths">-</span>
              </li>
              <li>
                <strong>Payoff date (approx):</strong>
                <span id="debtCalcPayoffDate">-</span>
              </li>
              <li>
                <strong>Total paid:</strong>
                <span id="debtCalcTotalPaid">-</span>
              </li>
              <li>
                <strong>Total interest:</strong>
                <span id="debtCalcTotalInterest">-</span>
              </li>
            </ul>
            <p id="debtCalcMessage" class="label"></p>
          </div>
        </section>
        <section class="flow-summary" style="margin-top: 1.5rem">
          <h2>Debt strategy helper (Snowball vs Avalanche)</h2>
          <div class="filters-row">
            <label>
              Strategy
              <select id="debtStrategy">
                <option value="snowball">
                  Snowball (smallest balance first)
                </option>
                <option value="avalanche">
                  Avalanche (highest interest first)
                </option>
              </select>
            </label>
            <label>
              Total monthly debt budget
              <input
                type="number"
                id="debtStrategyBudget"
                step="0.01"
                min="0"
                placeholder="e.g. 500"
              />
            </label>
            <button id="btnDebtStrategyRun" class="primary-btn">
              Simulate
            </button>
          </div>

          <table class="data-table">
            <thead>
              <tr>
                <th>#</th>
                <th>Debt</th>
                <th>Balance</th>
                <th>APR</th>
                <th>Monthly payment used</th>
                <th>Months to payoff (for this debt)</th>
                <th>Approx payoff date</th>
              </tr>
            </thead>
            <tbody id="debtStrategyTableBody">
              <!-- rows filled by JS -->
            </tbody>
          </table>

          <p
            id="debtStrategyMessage"
            class="label"
            style="margin-top: 0.5rem"
          ></p>
        </section>
      </section>
    </main>

    <!-- ACCOUNT MODAL -->
    <div id="accountModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h2 id="accountModalTitle">New Account</h2>
        <form id="accountForm">
          <input type="hidden" id="accountId" />

          <label>
            Name
            <input type="text" id="accountName" required />
          </label>

          <label>
            Type
            <select id="accountType" required>
              <option value="savings">Savings</option>
              <option value="checking">Checking</option>
              <option value="cash">Cash</option>
            </select>
          </label>

          <label>
            Current balance
            <input
              type="number"
              id="accountBalance"
              step="0.01"
              min="0"
              required
            />
          </label>

          <label>
            Interest rate (percent per year)
            <input
              type="number"
              id="accountInterestRate"
              step="0.01"
              min="0"
              value="0"
            />
          </label>

          <label>
            Compounding
            <select id="accountCompounding">
              <option value="monthly">Monthly</option>
              <option value="yearly">Yearly</option>
            </select>
          </label>

          <div class="modal-actions">
            <button type="button" class="secondary-btn" id="btnCancelAccount">
              Cancel
            </button>
            <button type="submit" class="primary-btn">Save</button>
          </div>
        </form>
      </div>
    </div>

    <!-- INCOME MODAL -->
    <div id="incomeModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h2 id="incomeModalTitle">New Income</h2>
        <form id="incomeForm">
          <input type="hidden" id="incomeId" />

          <label>
            Name
            <input type="text" id="incomeName" required />
          </label>

          <label>
            Amount
            <input
              type="number"
              id="incomeAmount"
              step="0.01"
              min="0"
              required
            />
          </label>

          <label>
            Frequency
            <select id="incomeFrequency" required>
              <option value="once">Once</option>
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
              <option value="monthly" selected>Monthly</option>
              <option value="yearly">Yearly</option>
            </select>
          </label>

          <label>
            Start date
            <input type="date" id="incomeStartDate" />
          </label>

          <label>
            End date (optional)
            <input type="date" id="incomeEndDate" />
          </label>

          <label>
            Destination type
            <select id="incomeDestinationType" required>
              <option value="account">Account</option>
              <option value="cash">Cash</option>
            </select>
          </label>

          <label id="incomeAccountWrapper">
            Destination account
            <select id="incomeDestinationAccount">
              <!-- options filled by JS from accounts -->
            </select>
            <small class="field-help"
              >Create accounts first on the Accounts page to see them
              here.</small
            >
          </label>

          <div class="modal-actions">
            <button type="button" class="secondary-btn" id="btnCancelIncome">
              Cancel
            </button>
            <button type="submit" class="primary-btn">Save</button>
          </div>
        </form>
      </div>
    </div>

    <!-- EXPENSE MODAL -->
    <div id="expenseModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h2 id="expenseModalTitle">New Expense</h2>
        <form id="expenseForm">
          <input type="hidden" id="expenseId" />

          <label>
            Name
            <input type="text" id="expenseName" required />
          </label>

          <label>
            Amount
            <input
              type="number"
              id="expenseAmount"
              step="0.01"
              min="0"
              required
            />
          </label>

          <label>
            Frequency
            <select id="expenseFrequency" required>
              <option value="once">Once</option>
              <option value="daily">Daily</option>
              <option value="weekly">Weekly</option>
              <option value="monthly" selected>Monthly</option>
              <option value="yearly">Yearly</option>
            </select>
          </label>

          <label>
            Start date
            <input type="date" id="expenseStartDate" />
          </label>

          <label>
            End date (optional)
            <input type="date" id="expenseEndDate" />
          </label>

          <label>
            Paid from
            <select id="expensePaidFromType" required>
              <option value="account">Account</option>
              <option value="cash">Cash</option>
            </select>
          </label>

          <label id="expenseAccountWrapper">
            Account
            <select id="expensePaidFromAccount">
              <!-- options filled by JS from accounts -->
            </select>
            <small class="field-help"
              >Create accounts first on the Accounts page to see them
              here.</small
            >
          </label>

          <label>
            Category (optional)
            <input
              type="text"
              id="expenseCategory"
              placeholder="Rent, Groceries, Subscriptions..."
            />
          </label>

          <div class="modal-actions">
            <button type="button" class="secondary-btn" id="btnCancelExpense">
              Cancel
            </button>
            <button type="submit" class="primary-btn">Save</button>
          </div>
        </form>
      </div>
    </div>

    <!-- DEBT MODAL -->
    <div id="debtModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h2 id="debtModalTitle">New Debt</h2>
        <form id="debtForm">
          <input type="hidden" id="debtId" />

          <label>
            Name
            <input type="text" id="debtName" required />
          </label>

          <label>
            Balance / principal
            <input
              type="number"
              id="debtPrincipal"
              step="0.01"
              min="0"
              required
            />
          </label>

          <label>
            Interest rate (APR percent per year)
            <input
              type="number"
              id="debtInterestRate"
              step="0.01"
              min="0"
              value="0"
            />
          </label>

          <label>
            Type
            <select id="debtType" required>
              <option value="long_term">Long term</option>
              <option value="short_term">Short term</option>
            </select>
          </label>

          <label>
            Category
            <select id="debtCategory">
              <option value="mortgage">Mortgage</option>
              <option value="car_loan">Car loan</option>
              <option value="student_loan">Student loan</option>
              <option value="personal_loan">Personal loan</option>
              <option value="credit_card">Credit card</option>
              <option value="pay_later">Pay later</option>
              <option value="other">Other</option>
            </select>
          </label>

          <label>
            Minimum monthly payment (optional)
            <input type="number" id="debtMinPayment" step="0.01" min="0" />
          </label>

          <div class="modal-actions">
            <button type="button" class="secondary-btn" id="btnCancelDebt">
              Cancel
            </button>
            <button type="submit" class="primary-btn">Save</button>
          </div>
        </form>
      </div>
    </div>

    <!-- DEBT CHART MODAL -->
    <div id="debtChartModal" class="modal hidden">
      <div class="modal-backdrop"></div>
      <div class="modal-content">
        <h2 id="debtChartTitle">Debt balance over time</h2>

        <form class="filters-row" style="margin-bottom: 0.75rem">
          <label>
            Monthly payment
            <input type="number" id="debtChartPayment" step="0.01" min="0" />
          </label>
          <button type="button" class="secondary-btn" id="btnDebtChartUpdate">
            Update chart
          </button>
        </form>

        <canvas id="debtChartCanvas" width="600" height="300"></canvas>

        <div class="modal-actions" style="margin-top: 0.75rem">
          <button type="button" class="secondary-btn" id="btnCloseDebtChart">
            Close
          </button>
        </div>
      </div>
    </div>

    <script src="js/app.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </body>
</html>
